install.packages("psych")
library(psych)
install.packages("venneuler")
library(venneuler)
install.packages("lattice")
library(lattice)
install.packages("ggplot2")
library(ggplot2)
install.packages("psych")
library(psych)
SccdEnrollments<-read.csv("/home/brian/Projects/Data/Renamed/processed/tidyEnrollments.csv",header=F, sep=",")
attach(SccdEnrollments)
describe(SccdEnrollments)
str(SccdEnrollments)
header<-read.csv("/home/brian/Projects/enrollment/SccdEnrollments.csv",header=T,sep=",")
colnames(header)
length(colnames(header))
header<-colnames(header)
header
colnames(SccdEnrollments)<-header
colnames(SccdEnrollments)<-header[-18]
head(SccdEnrollments)
SccdEnrollments<-read.csv("/home/brian/Projects/Data/Renamed/processed/tidyEnrollments.csv",header=F, sep=",")
head(SccdEnrollments)
SccdEnrollments<-read.csv("/home/brian/Projects/Data/Renamed/processed/tidyEnrollments.csv",header=F, sep=",")
head(SccdEnrollments)
header<-read.csv("/home/brian/Projects/enrollment/SccdEnrollments.csv",header=T,sep=",")
header<-colnames(header)
header
header[8]<-"start"
header
head(SccdEnrollments)
header[10:17]
header[10:17]<-header[9:]
header[10:17]<-header[9:16]
header
header[9]<-"end"
header
colnames(SccdEnrollments)<-header
colnames(SccdEnrollments)<-header[-18]
head(SccdEnrollments)
attach(SccdEnrollments)
describe(SccdEnrollments)
str(SccdEnrollments)
SccdEnrollments<-SccdEnrollments[,-18]
describe(SccdEnrollments)
levels(TYPE.days)
Type<-"Typical"
levels(Type)
SccdEnrollments<-data.frame(SccdEnrollments, Type)
rm(Type)
head(SccdEnrollments)
online.list<-grep("online", SccdEnrollments$TYPE.days, ignore.case=T, value=F)
odd.list<-grep("\\.|Arr|Correspondence|Other|tele", SccdEnrollments$TYPE.days, ignore.case=T, value=F)
hybrid.list<-grep("hybrid", SccdEnrollments$TYPE.days, ignore.case=T, value=F)
SccdEnrollments$Type<-factor(SccdEnrollments$Type,
sort(c(
"Typical",
"Odd",
"Hybrid",
"Online"
)
))
SccdEnrollments$Type[online.list]<-"Online"
SccdEnrollments$Type[SccdEnrollments$TYPE.days==""]<-"Odd"
SccdEnrollments$Type[hybrid.list]<-"Hybrid"
SccdEnrollments$Type[odd.list]<-"Odd"
SccdEnrollments$Type<-relevel(SccdEnrollments$Type, "Odd")
table(SccdEnrollments$Type)
cancelled<-grep("can",Instructor,ignore.case=T,fixed=F)
SccdEnrollments<-cbind(SccdEnrollments,"cancel"= c("live","cancelled"))
SccdEnrollments$cancel="live"
SccdEnrollments$cancel[cancelled]="cancelled"
table(SccdEnrollments$cancel)
SccdEnrollments$cancel<-factor(SccdEnrollments$cancel)
SccdEnrollments[SccdEnrollments$Enrolled != 0 & SccdEnrollments$cancel=="cancelled",10:11]
SccdEnrollments$cancel[SccdEnrollments$Enrolled != 0 & SccdEnrollments$cancel=="canclled"]="live"
names(SccdEnrollments)
head(SccdEnrollments[c(-12,-21)])
header<-read.csv("/home/brian/Projects/enrollment/SccdEnrollments.csv",header=T,sep=",")
header<-colnames(header)
header[8]<-"start"
header
header[10:17]<-header[9:16]
header
header[9]<-"end"
header
SccdEnrollments<-read.csv("/home/brian/Projects/Data/Renamed/processed/tidyEnrollments.csv",header=F, sep=",")
colnames(SccdEnrollments)<-header[-18]
head(SccdEnrollments)
attach(SccdEnrollments)
levels(TYPE.days)
Type<-"Typical"
levels(Type)
SccdEnrollments<-data.frame(SccdEnrollments, Type)
rm(Type)
head(SccdEnrollments)
online.list<-grep("online", SccdEnrollments$TYPE.days, ignore.case=T, value=F)
odd.list<-grep("\\.|Arr|Correspondence|Other|tele", SccdEnrollments$TYPE.days, ignore.case=T, value=F)
hybrid.list<-grep("hybrid", SccdEnrollments$TYPE.days, ignore.case=T, value=F)
SccdEnrollments$Type<-factor(SccdEnrollments$Type,
sort(c(
"Typical",
"Odd",
"Hybrid",
"Online"
)
))
SccdEnrollments$Type[online.list]<-"Online"
SccdEnrollments$Type[SccdEnrollments$TYPE.days==""]<-"Odd"
SccdEnrollments$Type[hybrid.list]<-"Hybrid"
SccdEnrollments$Type[odd.list]<-"Odd"
SccdEnrollments$Type<-relevel(SccdEnrollments$Type, "Odd")
table(SccdEnrollments$Type)
cancelled<-grep("can",Instructor,ignore.case=T,fixed=F)
SccdEnrollments<-cbind(SccdEnrollments,"cancel"= c("live","cancelled"))
SccdEnrollments$cancel="live"
SccdEnrollments$cancel[cancelled]="cancelled"
table(SccdEnrollments$cancel)
SccdEnrollments$cancel<-factor(SccdEnrollments$cancel)
names(SccdEnrollments)
factor(SccdEnrollments$cancel)
SccdEnrollments[SccdEnrollments$Enrolled != 0 & SccdEnrollments$cancel=="cancelled",10:11]
SccdEnrollments$cancel[SccdEnrollments$Enrolled != 0 & SccdEnrollments$cancel=="canclled"]="live"
names(SccdEnrollments)
head(SccdEnrollments[c(-13)])
SccdEnrollments<-SccdEnrollments[c(-13)]
split.by.cancel<-split(SccdEnrollments,SccdEnrollments$cancel)
split.by.campus.and.type<-split(SccdEnrollments,list(SccdEnrollments$Campus,SccdEnrollments$Type))
split.by.campus.type.cancel<-split(SccdEnrollments,list(SccdEnrollments$Campus,SccdEnrollments$Type,SccdEnrollments$cancel))
split.by.type<-split(SccdEnrollments,list(SccdEnrollments$Type))
SccdEnrollments$Title<-gsub("ENGLISH COMPOSITION|ENGLISH COMPOSITION I","ENGLISH COMPOSITION I",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("US HISTORY 2","US HISTORY II:1800-1900",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("IS-ENVIRONMNTL ISSUES/PR","IS-ENVIRON ISSUES/PROB I",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("LAW AND SOCIETY","LAW & SOCIETY",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("US HISTORY 1","US HIST 1: TO 1800",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("US HISTORY I: TO 1800","US HIST 1: TO 1800",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("US HIST I:TO 1800","US HIST 1: TO 1800",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("TODLRS","TODDLR",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Instructor<-gsub(" $","",SccdEnrollments$Instructor, ignore.case=T,perl= T)
grep(" $",SccdEnrollments$Instructor, ignore.case=T)
SccdEnrollments$Instructor<-factor(SccdEnrollments$Instructor)
unique.instructors<-match(unique(SccdEnrollments$Instructor),SccdEnrollments$Instructor)
SccdEnrollments[unique.instructors,c(5,10)] #this looks promising for narrowing down the instructors.  eg, ending with a "."
headSccdEnrollments[unique.instructors,c(5,10)]) #this looks promising for narrowing down the instructors.  eg, ending with a "."
head(SccdEnrollments[unique.instructors,c(5,10)]) #this looks promising for narrowing down the instructors.  eg, ending with a "."
SccdEnrollments$Course.ID
SccdEnrollments$Course.ID<-sub("\\&", "\\& ",SccdEnrollments$Course.ID)
SccdEnrollments$Course.ID
SccdEnrollments$Course.ID<-gsub("  ", " ",SccdEnrollments$Course.ID)
SccdEnrollments$Course.ID<-gsub("HITEC232 01","HITEC 232 01",SccdEnrollments$Course.ID)
SccdEnrollments$Course.ID<-gsub("  ", " ",SccdEnrollments$Course.ID)
splitCourse<-strsplit(as.character(SccdEnrollments$Course.ID)," ")  #this splits Course.ID into parts
SccdEnrollments$credit.count<-equal.count(SccdEnrollments$CREDIT,4) #used in lattice
library(psych)
library(venneuler)
library(lattice)
library(ggplot2)
SccdEnrollments$credit.count<-equal.count(SccdEnrollments$CREDIT,4) #used in lattice
SccdEnrollments$enrolled.count<-equal.count(SccdEnrollments$Enrolled,4) #used in lattice
SccdEnrollments$classCap.count<-equal.count(SccdEnrollments$classCap,4) #used in lattice
SccdEnrollments$Wait.List.count<-equal.count(SccdEnrollments$Wait.List,4) #used in lattice
SccdEnrollments$FTEstate.count<-equal.count(SccdEnrollments$FTES.STATE,4) #used in lattice
SccdEnrollments$waitlist.ratio<-SccdEnrollments$Wait.List/max(SccdEnrollments$Wait.List)
SccdEnrollments$credit.cut<-cut(SccdEnrollments$CREDIT,4)
SccdEnrollments$enrolled.cut<-cut(SccdEnrollments$Enrolled,4)
SccdEnrollments$classCap.cut<-cut(SccdEnrollments$classCap,4)
SccdEnrollments$Wait.List.cut<-cut(SccdEnrollments$Wait.List,4)
SccdEnrollments$FTEstate.cut<-cut(SccdEnrollments$FTES.STATE,4)
df<-SccdEnrollments[SccdEnrollments$cancel=="live",]
nrow(df)
df[,c(11:13,17)]
library(psych)
library(venneuler)
library(lattice)
library(ggplot2)
header<-read.csv("I:\\My Data Sources\\SCCDEnrollments\\SccdEnrollment.csv",header=T,sep=",")
ls
ls()
header
header<-colnames(header)
header[8]<-"start"
header[10:18]<-header[9:17]
header[9]<-"end"
header
SccdEnrollments<-read.csv("I:\\My Data Sources\\Data\\Data\\tidyEnrollments.csv",header=T, sep=",")
colnames(SccdEnrollments)<-header
head(SccdEnrollments)
attach(SccdEnrollments)
describe(SccdEnrollments)
#describeBy(list(c(Enrolled,classCap)),list(c(Campus,Type)))
#SccdEnrollments<-SccdEnrollments[,-18]
levels(TYPE.days)
Type<-"Typical"
levels(Type)
SccdEnrollments<-data.frame(SccdEnrollments, Type)
rm(Type)
head(SccdEnrollments)
online.list<-grep("online", SccdEnrollments$TYPE.days, ignore.case=T, value=F)
odd.list<-grep("\\.|Arr|Correspondence|Other|tele", SccdEnrollments$TYPE.days, ignore.case=T, value=F)
hybrid.list<-grep("hybrid", SccdEnrollments$TYPE.days, ignore.case=T, value=F)
SccdEnrollments$Type<-factor(SccdEnrollments$Type,
sort(c(
"Typical",
"Odd",
"Hybrid",
"Online"
)
))
SccdEnrollments$Type[online.list]<-"Online"
SccdEnrollments$Type[SccdEnrollments$TYPE.days==""]<-"Odd"
SccdEnrollments$Type[hybrid.list]<-"Hybrid"
SccdEnrollments$Type[odd.list]<-"Odd"
SccdEnrollments$Type<-relevel(SccdEnrollments$Type, "Odd")
table(SccdEnrollments$Type)
#fixed below is whether it returns a logical.
cancelled<-grep("can",Instructor,ignore.case=T,fixed=F)
SccdEnrollments<-cbind(SccdEnrollments,"cancel"= c("live","cancelled"))
SccdEnrollments$cancel="live"
SccdEnrollments$cancel[cancelled]="cancelled"
table(SccdEnrollments$cancel)
SccdEnrollments$cancel<-factor(SccdEnrollments$cancel)
SccdEnrollments[SccdEnrollments$Enrolled != 0 & SccdEnrollments$cancel=="cancelled",10:11]
SccdEnrollments$cancel[SccdEnrollments$Enrolled != 0 & SccdEnrollments$cancel=="canclled"]="live"
names(SccdEnrollments)
head(SccdEnrollments[c(-13)])
SccdEnrollments<-SccdEnrollments[c(-13)]
split.by.cancel<-split(SccdEnrollments,SccdEnrollments$cancel)
split.by.campus.and.type<-split(SccdEnrollments,list(SccdEnrollments$Campus,SccdEnrollments$Type))
split.by.campus.type.cancel<-split(SccdEnrollments,list(SccdEnrollments$Campus,SccdEnrollments$Type,SccdEnrollments$cancel))
split.by.type<-split(SccdEnrollments,list(SccdEnrollments$Type))
SccdEnrollments$Title<-gsub("ENGLISH COMPOSITION|ENGLISH COMPOSITION I","ENGLISH COMPOSITION I",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("US HISTORY 2","US HISTORY II:1800-1900",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("IS-ENVIRONMNTL ISSUES/PR","IS-ENVIRON ISSUES/PROB I",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("LAW AND SOCIETY","LAW & SOCIETY",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("US HISTORY 1","US HIST 1: TO 1800",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("US HISTORY I: TO 1800","US HIST 1: TO 1800",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("US HIST I:TO 1800","US HIST 1: TO 1800",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Title<-gsub("TODLRS","TODDLR",SccdEnrollments$Title, ignore.case=T)
SccdEnrollments$Instructor<-gsub(" $","",SccdEnrollments$Instructor, ignore.case=T,perl= T)
grep(" $",SccdEnrollments$Instructor, ignore.case=T)
SccdEnrollments$Instructor<-factor(SccdEnrollments$Instructor)
unique.instructors<-match(unique(SccdEnrollments$Instructor),SccdEnrollments$Instructor)
head(SccdEnrollments[unique.instructors,c(5,10)]) #this looks promising for narrowing down the instructors.  eg, ending with a "."
##the following will put a space after the "&"
SccdEnrollments$Course.ID<-sub("\\&", "\\& ",SccdEnrollments$Course.ID)
##Follow this with a sub to change all two spaces into 1
SccdEnrollments$Course.ID<-gsub("  ", " ",SccdEnrollments$Course.ID)
SccdEnrollments$Course.ID<-gsub("HITEC232 01","HITEC 232 01",SccdEnrollments$Course.ID)
SccdEnrollments$Course.ID<-gsub("  ", " ",SccdEnrollments$Course.ID)
splitCourse<-strsplit(as.character(SccdEnrollments$Course.ID)," ")  #this splits Course.ID into parts
##the following is a check to see how many entries have more than just 3 parts (course, level, section)
#CoursePartLength<-1:nrow(SccdEnrollments)
#for (i in 1:nrow(SccdEnrollments)){
#  CoursePartLength[i]<-length(splitCourse[[i]])
#}
#table(CoursePartLength)
##Now make 3 new variables: Course (eg, psych), level (eg., 100), section
##Create only Psych courses, District wide
PsychEnroll<-SccdEnrollments[grep("psy", Course.ID, ignore.case=T),]
nrow(PsychEnroll[PsychEnroll$Campus == "North",])
NorthPsychEnroll<-PsychEnroll[PsychEnroll$Campus == "North",]  ###only north psych courses
describe(NorthPsychEnroll)
test<-(subset(SccdEnrollments,Quarter == "Fall 2010"|
Quarter == "Winter 2011"|
Quarter == "Spring 2011"|
Quarter == "Fall 2011"|
Quarter == "Winter 2012"|
Quarter == "Spring 2012",select= c(Quarter,Campus,Enrolled)))
mean(test$Enrolled)
test
NorthPsychEnroll
test<-(subset(NorthPsychEnroll,Quarter == "Fall 2010"|
Quarter == "Winter 2011"|
Quarter == "Spring 2011"|
Quarter == "Fall 2011"|
Quarter == "Winter 2012"|
Quarter == "Spring 2012",select= c(Quarter,Campus,Enrolled)))
mean(test$Enrolled)
table(NorthpsychEnroll$Course.ID)
table(NorthPsychEnroll$Course.ID)
grep("[0-9]{3}",NorthPsychEnroll$Course.ID)
grep("[0-9]{3}",NorthPsychEnroll$Course.ID,value=F)
grep("[0-9]{3}",NorthPsychEnroll$Course.ID,value=T)
P.100<-grep("100",NorthPsychEnroll$Course.ID,value=T)
p.200<-grep("200",NorthPsychEnroll$Course.ID,value=T)
p.210<-grep("210",NorthPsychEnroll$Course.ID,value=T)
p.220<-grep("220",NorthPsychEnroll$Course.ID,value=T)
p.222<-grep("222",NorthPsychEnroll$Course.ID,value=T)
p.230<-grep("230",NorthPsychEnroll$Course.ID,value=T)
p.245<-grep("245",NorthPsychEnroll$Course.ID,value=T)
p.257<-grep("257",NorthPsychEnroll$Course.ID,value=T)
p.298<-grep("298",NorthPsychEnroll$Course.ID,value=T)
p.299<-grep("299",NorthPsychEnroll$Course.ID,value=T)
P.100
P.100<-grep("100",NorthPsychEnroll$Course.ID)
p.200<-grep("200",NorthPsychEnroll$Course.ID)
p.210<-grep("210",NorthPsychEnroll$Course.ID)
p.220<-grep("220",NorthPsychEnroll$Course.ID)
p.222<-grep("222",NorthPsychEnroll$Course.ID)
p.230<-grep("230",NorthPsychEnroll$Course.ID)
p.245<-grep("245",NorthPsychEnroll$Course.ID)
p.257<-grep("257",NorthPsychEnroll$Course.ID)
p.298<-grep("298",NorthPsychEnroll$Course.ID)
p.299<-grep("299",NorthPsychEnroll$Course.ID)
p.299
NorthPsychEnroll[p.299]
NorthPsychEnroll[p.299,]
NorthPsychEnroll$Course<-"599"
NorthPsychEnroll
?for
k
??control
for (i in nrow(NorthPsychEnroll)) {
if (p.100) {NorthPsychEnroll$Course<-"100"}
}
p.100<-grep("100",NorthPsychEnroll$Course.ID)
for (i in nrow(NorthPsychEnroll)) {
if (p.100) {NorthPsychEnroll$Course<-"100"}
}
for (i in nrow(NorthPsychEnroll)) {
if (NorthPsychEnroll[p.100]) {NorthPsychEnroll$Course<-"100"}
}
for (i in nrow(NorthPsychEnroll)) {
if (NorthPsychEnroll[p.100,]) {NorthPsychEnroll$Course<-"100"}
}
NorthPsychEnroll$Course
NorthPsychEnroll$Course<-"599"
NorthPsychEnroll$Course
SccdEnrollments$Course<-gsub("100","100",NorthPsychEnroll$Course.ID, ignore.case=T)
NorthPsychEnroll$Course<-gsub("100","100",NorthPsychEnroll$Course.ID, ignore.case=T)
NorthPsychEnroll$Course
NorthPsychEnroll$Course.ID
NorthPsychEnroll$Course
NorthPsychEnroll$Cours<-"599"
NorthPsychEnroll$Course<-"599"
head(NorthPsychEnroll)
length(NorthPsychEnroll)
NorthPsychEnroll<-NorthPsychEnroll[,-21]
length(NorthPsychEnroll)
head(NorthPsychEnroll)
NorthPsychEnroll$Course<-gsub("100","100", NorthPsychEnroll$Course.ID, ignore.case=T)
NorthPsychEnroll$Course
NorthPsychEnroll$Course<-"599"
NorthPsychEnroll$Course<-gsub("100","100", NorthPsychEnroll$Course.ID, ignore.case=T,fixed=T)
NorthPsychEnroll$Course
NorthPsychEnroll$Course<-"599"
NorthPsychEnroll$Course[p.100]<-"100"
NorthPsychEnroll$Course
NorthPsychEnroll$Course[grep("100",NorthPsychEnroll$Course.ID)]<-"100"
NorthPsychEnroll$Course<-"599"
NorthPsychEnroll$Course
NorthPsychEnroll$Course[grep("100",NorthPsychEnroll$Course.ID)]<-"100"
NorthPsychEnroll$Course[grep("200",NorthPsychEnroll$Course.ID)]<-"200"
NorthPsychEnroll$Course[grep("210",NorthPsychEnroll$Course.ID)]<-"210"
NorthPsychEnroll$Course[grep("220",NorthPsychEnroll$Course.ID)]<-"220"
NorthPsychEnroll$Course[grep("222",NorthPsychEnroll$Course.ID)]<-"222"
NorthPsychEnroll$Course[grep("230",NorthPsychEnroll$Course.ID)]<-"230"
NorthPsychEnroll$Course[grep("245",NorthPsychEnroll$Course.ID)]<-"245"
NorthPsychEnroll$Course[grep("257",NorthPsychEnroll$Course.ID)]<-"257"
NorthPsychEnroll$Course[grep("298",NorthPsychEnroll$Course.ID)]<-"298"
NorthPsychEnroll$Course[grep("299",NorthPsychEnroll$Course.ID)]<-"299"
table(NorthPsychEnroll$Course)
tapply(NorthPsychEnroll$Enrollment,NorthPsychEnroll$Course,mean)
NorthPsychEnroll$Enrollment
tapply(NorthPsychEnroll$Enrolledment,NorthPsychEnroll$Course,mean)
tapply(NorthPsychEnroll$Enrolled,NorthPsychEnroll$Course,mean)
tapply(NorthPsychEnroll$Enrolled,c(NorthPsychEnroll$Quarter,NorthPsychEnroll$Course),mean)
NorthPsychEnroll$Quarter
table(NorthPsychEnroll$Course,NorthPsychEnroll$Quarter)
tapply(NorthPsychEnroll$Enrolled,NorthPsychEnroll$Course,mean)
plot(NorthPsychEnroll$Enrolled)
plot(NorthPsychEnroll$Enrolled,NorthPsychEnroll$Course)
table(NorthPsychEnroll$Course)
NorthPsychEnroll[NorthPsychEnroll$Course=='599',3]
NorthPsychEnroll[NorthPsychEnroll$Course=='599',4]
NorthPsychEnroll$Course[grep("205",NorthPsychEnroll$Course.ID)]<-"205"
NorthPsychEnroll$Course[grep("209",NorthPsychEnroll$Course.ID)]<-"209"
table(NorthPsychEnroll$Course)
plot(NorthPsychEnroll$Enrolled,NorthPsychEnroll$Course)
plot(NorthPsychEnroll$Course,NorthPsychEnroll$Enrolled)
boxplot(NorthPsychEnroll$Course,NorthPsychEnroll$Enrolled)
boxplot(NorthPsychEnroll$Course~NorthPsychEnroll$Enrolled)
boxplot(NorthPsychEnroll$Enrolled~NorthPsychEnroll$Course)
